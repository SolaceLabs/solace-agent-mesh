test_case_id: test_get_projects_with_data
description: Test GET /api/v1/projects returns seeded projects correctly
tags: [projects, api]

setup_projects:
  - id: "test-project-unique-001"
    name: "Test Project 1"
    user_id: "sam_dev_user"
    description: "First test project"
    system_prompt: "You are a helpful assistant for project 1"
    created_at_iso: "2024-01-01T10:00:00+00:00"
  
  - id: "test-project-unique-002"
    name: "Test Project 2"
    user_id: "sam_dev_user"
    description: "Second test project"
    created_at_iso: "2024-01-02T10:00:00+00:00"

expected_http_responses:
  - description: "Get all projects for user - verify seeded projects exist"
    request:
      method: GET
      path: /api/v1/projects
      query_params:
        user_id: "sam_dev_user"
    expected_status_code: 200
    # Note: We check that our seeded projects exist in the response
    # but don't assert exact total count due to database persistence between tests
    text_contains:
      - '"id":"test-project-unique-001"'
      - '"name":"Test Project 1"'
      - '"id":"test-project-unique-002"'
      - '"name":"Test Project 2"'