# Tool Manifest for Sandbox Worker
#
# This file declares what tools are available in this sandbox worker.
# The worker subscribes to one topic per tool and resolves module/function
# from this manifest when a request arrives.
#
# Mount this file at /tools/manifest.yaml inside the container
# (or set MANIFEST_PATH env var to a different location).

version: 1

tools:
  echo_tool:
    runtime: python
    module: example_sandbox_tools
    function: echo_tool
    description: "Echo back a message from the secure sandbox environment"

  execute_python:
    runtime: python
    module: example_sandbox_tools
    function: execute_python
    description: "Execute arbitrary Python code in a sandbox"
    timeout_seconds: 60
    sandbox_profile: standard

  # Artifact test - accepts an input artifact, processes it, creates output artifact.
  process_file:
    runtime: python
    module: process_file_tool
    function: process_file
    description: "Process an input file and produce a summary (tests artifact pipeline)"

  # Portable tool test - uses ToolContextFacade and ToolResult annotations
  # so the same code works in both python and sam_remote executors.
  portable_echo:
    runtime: python
    module: portable_test_tool
    function: portable_echo
    description: "Portable echo tool (tests ToolContextFacade injection)"

  # Portable process_file - uses Artifact type annotation for input injection
  portable_process_file:
    runtime: python
    module: portable_process_file
    function: portable_process_file
    description: "Process an input file using portable API (tests Artifact injection)"

  # Package loading test - pyfiglet is NOT pre-installed in the container.
  # The worker auto-installs it on startup via ensure_packages_installed().
  render_ascii_art:
    runtime: python
    module: package_test_tool
    function: render_ascii_art
    package: pyfiglet
    description: "Render text as ASCII art (tests package auto-install)"

  # DynamicTool class test - uses class_name instead of function.
  # The init protocol enriches the tool description at startup.
  dynamic_test:
    runtime: python
    module: dynamic_test_tool
    class_name: DynamicTestTool
    description: "Dynamic test tool (class-based, enriches description via init)"
