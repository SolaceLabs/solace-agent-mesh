# Web Search Agent Configuration
# This agent performs quick web searches using Google/Tavily APIs
# Optimized for fast, focused information retrieval

log:
  stdout_log_level: INFO
  log_file_level: INFO
  log_file: web_search_agent.log

!include ../shared_config.yaml

apps:
  - name: "WebSearchAgent_app"
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app
    broker:
      <<: *broker_connection

    app_config:
      namespace: "${NAMESPACE}"
      supports_streaming: true
      agent_name: "WebSearchAgent"
      display_name: "Web Search Agent"
      model: *general_model

      instruction: |
        You are a web search assistant specialized in finding and summarizing information from the internet.
        
        **Your Role:**
        - Perform quick, focused web searches to answer user questions
        - Provide concise summaries with relevant citations
        - Use web search tools to find current, accurate information
        
        **How to Use Web Search:**
        1. When asked a question, determine if web search is needed
        2. Use the `web_search` tool to search for relevant information
        3. Analyze the search results
        4. Provide a clear, concise answer with citations
        
        **Best Practices:**
        - Use specific, targeted search queries
        - Prioritize recent and authoritative sources
        - Cite your sources using [[cite:searchN]] format (e.g., [[cite:search0]], [[cite:search1]])
        - If results are insufficient, try alternative search queries
        - Be transparent about information limitations
        
        **When to Use Web Search:**
        - Current events and news
        - Factual information that may have changed recently
        - Product information and reviews
        - Technical documentation and guides
        - General knowledge questions
        
        **Citation Format:**
        - ALWAYS cite sources using [[cite:searchN]] format where N is the source number (0-indexed)
        - DO NOT manually list sources at the end of your response
        - DO NOT include a "Sources:" section with links
        - The system will automatically display source links to the user
        - Just use the [[cite:searchN]] markers inline with your text
        
        **Example Response:**
        "The latest research shows significant progress in renewable energy[[cite:search0]]. Solar panel efficiency has improved by 15% in the past year[[cite:search1]], while costs have decreased by 20%[[cite:search2]]."
        
        Remember: Your goal is to provide quick, accurate answers with inline citations. The UI will handle displaying the source links.
      
      tools:
        - tool_type: builtin-group
          group_name: web_search
          tool_config:    
            # API keys for web search
            tavily_api_key: "${TAVILY_API_KEY}"
            google_search_api_key: "${GOOGLE_SEARCH_API_KEY}"
            google_cse_id: "${GOOGLE_CSE_ID}"

      session_service: *default_session_service
      artifact_service: *default_artifact_service
      
      artifact_handling_mode: "reference"
      enable_embed_resolution: true
      enable_artifact_content_instruction: true
      data_tools_config: *default_data_tools_config

      # Agent Card Definition
      agent_card:
        version: "1.0.0"
        description: |
          Fast web search agent for quick information retrieval from the internet.
          
          Capabilities:
          • Web Search: Google and Tavily search integration
          • Quick Answers: Fast, focused responses to queries
          • Source Citation: Automatic citation of web sources
          • Current Information: Access to up-to-date web content
          
          Perfect for:
          - Quick fact-checking
          - Current events and news
          - Product information
          - General web queries
          - Finding specific information online
          
          Note: Optimized for speed and focused searches. For comprehensive research, use Deep Research Agent.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"]
        skills:
          - id: "web_search"
            name: "Web Search"
            description: "Performs web searches using Google or Tavily APIs to find current information."
          - id: "quick_answers"
            name: "Quick Answers"
            description: "Provides fast, focused answers to user questions using web search."
          - id: "source_citation"
            name: "Source Citation"
            description: "Automatically cites web sources with links and metadata."
      
      # Discovery & Communication
      agent_card_publishing:
        interval_seconds: 10
      agent_discovery:
        enabled: true
      inter_agent_communication:
        allow_list: []
        deny_list: []
        request_timeout_seconds: 120