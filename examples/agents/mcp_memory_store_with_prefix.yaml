# Solace AI Connector Example: Memory Store MCP with tool_name_prefix
#
# This example demonstrates using the tool_name_prefix feature to avoid
# naming conflicts when using multiple MCP toolsets.

log:
  stdout_log_level: INFO
  log_file_level: DEBUG
  log_file: memory_store_agent.log

# Shared SAM config
!include ../shared_config.yaml

apps:
  - name: memory_store_agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app
    broker:
      <<: *broker_connection

    # --- App Level Config ---
    app_config:
      namespace: ${NAMESPACE}
      supports_streaming: true
      agent_name: "MemoryStoreAgent"
      display_name: "Memory Store"
      model: *planning_model

      instruction: |
        You are a helpful assistant with access to a memory store.

        You can use the memory_* tools to interact with the user's memory:
        - Use memory_write_* tools to save information the user wants to remember
        - Use memory_read_* tools to retrieve previously stored information

        Always be helpful and reference stored memories when relevant to the conversation.

      # --- Tools Definition (including MCP with prefix) ---
      tools:
        - tool_type: mcp
          tool_name_prefix: "memory"  # Prefixes all tools: memory_read_*, memory_write_*, etc.
          connection_params:
            type: sse
            url: http://localhost:1111/sse
            timeout: 30
        - tool_type: builtin-group
          group_name: "artifact_management"

      artifact_service:
        type: "filesystem"
        base_path: "./artifacts"
        artifact_scope: namespace

      # --- Tool Output Handling ---
      tool_output_save_threshold_bytes: 4000
      tool_output_llm_return_max_bytes: 30000

      # --- Artifact Handling & Embeds ---
      artifact_handling_mode: "reference"
      enable_embed_resolution: true
      enable_artifact_content_instruction: true

      # --- Agent Card Definition ---
      agent_card:
        description: "An agent with access to a persistent memory store via MCP."
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"]
        skills: []

      # --- Discovery & Communication ---
      agent_card_publishing: { interval_seconds: 10 }
      agent_discovery: { enabled: false }
      inter_agent_communication:
        allow_list: []
        request_timeout_seconds: 30