# Calculator Agent Configuration
# This file defines a calculator agent for the Solace Agent Mesh (SAM).
# The agent can perform basic addition operations using natural language requests.

log:
  stdout_log_level: INFO
  log_file_level: DEBUG
  log_file: calculator_agent.log

# Include shared configuration for broker connection and model definitions
!include ../shared_config.yaml

# Define the calculator agent application
apps:
  - name: calculator_agent_app
    # Base path for resolving module paths
    app_base_path: .
    # Python module containing the agent application entry point
    app_module: src.solace_agent_mesh.agent.sac.app
    # Inherit broker connection settings from shared config
    broker:
      <<: *broker_connection

    # Configuration specific to the calculator agent
    app_config:
      # Namespace for this agent (used for topic hierarchy)
      namespace: ${NAMESPACE}
      # Enable streaming responses
      supports_streaming: true
      # Unique agent name within the mesh
      agent_name: "CalculatorAgent"
      # Display name for user interfaces
      display_name: "Calculator"
      # Use the planning model for better reasoning
      model: *planning_model
      
      # Agent instructions defining its behavior and capabilities
      instruction: |
        You are a calculator agent that specializes in performing addition operations.
        
        When users ask you to add numbers, sum values, or perform addition calculations,
        use the add_two_numbers tool to provide accurate results.
        
        You can handle:
        - Integer addition (e.g., "add 5 and 3")  
        - Decimal addition (e.g., "what is 2.5 + 7.1?")
        - Negative numbers (e.g., "calculate -10 + 15")
        
        Always be helpful and provide clear, accurate mathematical results.
        If users ask for operations other than addition, politely explain that
        you specialize in addition and suggest they contact other agents for 
        different mathematical operations.

      # Tools available to this agent
      tools:
        # Custom calculator tool for addition
        - tool_type: python
          tool_name: "add_two_numbers" 
          component_module: "examples.sample_tools"
          function_name: "add_two_numbers"

      # Configuration for the service that manages conversation history
      session_service:
        type: "memory"
        default_behavior: "PERSISTENT"

      # Configuration for the service that manages file artifacts  
      artifact_service:
        type: "filesystem"
        base_path: "/tmp/calculator_artifacts"
        artifact_scope: namespace

      # How the agent should handle artifacts in its context
      artifact_handling_mode: "reference"
      # Enables the agent to resolve dynamic {{embeds}} in its responses
      enable_embed_resolution: true
      # Allows the content of artifacts to be automatically included in the LLM prompt
      enable_artifact_content_instruction: true

      # Agent card for discovery and capabilities advertisement
      agent_card:
        description: |
          Calculator agent specialized in addition operations. 
          Use this agent when you need to add two numbers together.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"] 
        skills:
        - id: "addition"
          name: "Addition Calculator"
          description: "Performs addition of two numbers with support for integers, decimals, and negative values"
          examples:
            - "Add 5 and 3"
            - "What is 2.5 + 7.1?"
            - "Calculate -10 + 15"

      # How often (in seconds) the agent publishes its agent_card for discovery
      agent_card_publishing: { interval_seconds: 10 }
      # Enables this agent to be discovered by other agents
      agent_discovery: { enabled: true }
      # Configuration for communication with other agents
      inter_agent_communication:
        allow_list: ["*"]
        request_timeout_seconds: 120