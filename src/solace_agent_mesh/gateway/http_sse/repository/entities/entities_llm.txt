## Quick Summary
The entities directory contains domain entities for the repository layer, providing core business objects for managing chat sessions, messages, and session history with built-in validation and business logic.

## Files Overview
- `__init__.py` - Exports the main domain entities (Message, Session, SessionHistory)
- `message.py` - Message entity with content validation and sender type checking
- `session.py` - Session entity with name management and access control
- `session_history.py` - Composite entity combining sessions with their message history

## Developer API Reference

### __init__.py
**Purpose:** Provides centralized imports for all domain entities
**Import:** `from solace_agent_mesh.gateway.http_sse.repository.entities import Message, Session, SessionHistory`

### message.py
**Purpose:** Defines the Message domain entity with business logic for chat messages
**Import:** `from solace_agent_mesh.gateway.http_sse.repository.entities import Message`

**Classes:**
- `Message(id: MessageId, session_id: SessionId, message: str, sender_type: SenderType, sender_name: str, message_type: MessageType = MessageType.TEXT, created_time: int)` - Message domain entity with business logic
  - `validate_message_content() -> None` - Validates message content is not empty and under 10MB limit
  - `is_from_user() -> bool` - Checks if message is from a user
  - `is_from_agent() -> bool` - Checks if message is from an agent
  - `is_system_message() -> bool` - Checks if message is a system message
  - `id: MessageId` - Unique message identifier
  - `session_id: SessionId` - Associated session identifier
  - `message: str` - Message content
  - `sender_type: SenderType` - Type of sender (USER, AGENT, SYSTEM)
  - `sender_name: str` - Name of the message sender
  - `message_type: MessageType` - Type of message content
  - `created_time: int` - Message creation timestamp

**Usage Examples:**
```python
from solace_agent_mesh.gateway.http_sse.repository.entities import Message
from solace_agent_mesh.gateway.http_sse.shared.enums import SenderType, MessageType

# Create a user message
message = Message(
    id="msg_123",
    session_id="session_456",
    message="Hello, how can I help?",
    sender_type=SenderType.USER,
    sender_name="John Doe",
    message_type=MessageType.TEXT,
    created_time=1640995200000
)

# Validate message content
message.validate_message_content()

# Check sender type
if message.is_from_user():
    print("Message from user")
```

### session.py
**Purpose:** Defines the Session domain entity with business logic for chat sessions
**Import:** `from solace_agent_mesh.gateway.http_sse.repository.entities import Session`

**Classes:**
- `Session(id: SessionId, user_id: UserId, name: str | None = None, agent_id: AgentId | None = None, created_time: int, updated_time: int | None = None)` - Session domain entity with business logic
  - `update_name(new_name: str) -> None` - Updates session name with validation and sets updated_time
  - `mark_activity() -> None` - Marks session as having recent activity by updating timestamp
  - `can_be_deleted_by_user(user_id: UserId) -> bool` - Checks if user can delete this session
  - `can_be_accessed_by_user(user_id: UserId) -> bool` - Checks if user can access this session
  - `id: SessionId` - Unique session identifier
  - `user_id: UserId` - Owner user identifier
  - `name: str | None` - Optional session name
  - `agent_id: AgentId | None` - Optional associated agent identifier
  - `created_time: int` - Session creation timestamp
  - `updated_time: int | None` - Last update timestamp

**Usage Examples:**
```python
from solace_agent_mesh.gateway.http_sse.repository.entities import Session

# Create a new session
session = Session(
    id="session_123",
    user_id="user_456",
    name="Customer Support Chat",
    agent_id="agent_789",
    created_time=1640995200000
)

# Update session name
session.update_name("Updated Chat Name")

# Mark activity
session.mark_activity()

# Check permissions
if session.can_be_accessed_by_user("user_456"):
    print("User can access this session")
```

### session_history.py
**Purpose:** Defines a composite entity that combines a session with its message history
**Import:** `from solace_agent_mesh.gateway.http_sse.repository.entities import SessionHistory`

**Classes:**
- `SessionHistory(session: Session, messages: list[Message] = [], total_message_count: int = 0)` - Composite entity representing a session with its messages
  - `session: Session` - The session entity
  - `messages: list[Message]` - List of messages in the session
  - `total_message_count: int` - Total count of messages (may exceed messages list length for pagination)

**Usage Examples:**
```python
from solace_agent_mesh.gateway.http_sse.repository.entities import SessionHistory, Session, Message

# Create session history
session = Session(
    id="session_123",
    user_id="user_456",
    created_time=1640995200000
)

messages = [
    Message(
        id="msg_1",
        session_id="session_123",
        message="Hello",
        sender_type=SenderType.USER,
        sender_name="John",
        created_time=1640995200000
    )
]

history = SessionHistory(
    session=session,
    messages=messages,
    total_message_count=1
)

# Access session and messages
print(f"Session: {history.session.id}")
print(f"Message count: {len(history.messages)}")
print(f"Total messages: {history.total_message_count}")
```

# content_hash: 2f151fb3ddda579f84db4d4685763dc065e0ae4aa862fc4286815595dc742644
