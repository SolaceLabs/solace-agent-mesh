import{j as e,r as l}from"./index-BJHAE5s4.js";function se({steps:r,currentStepIndex:s,onStepClick:c}){return e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-300 mr-9 ml-9",children:e.jsx("div",{className:"h-full bg-solace-green transition-all duration-300 ease-in-out",style:{width:s===0?"0%":`${s/(r.length-1)*100}%`}})}),e.jsx("div",{className:"flex items-center justify-between w-full relative z-10",children:r.map((d,i)=>{const o=i===s,f=i<s;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>c==null?void 0:c(i),disabled:!c,className:`
                  w-10 h-10 rounded-full flex items-center justify-center
                  font-bold transition-colors duration-300
                  ${o?"bg-solace-green text-white":""}
                  ${f?"bg-solace-dark-green text-white":""}
                  ${!o&&!f?"bg-gray-200 text-gray-600":""}
                  ${c?"cursor-pointer":"cursor-default"}
                `,children:f?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):i+1}),e.jsx("span",{className:`
                  mt-2 text-xs font-medium text-center
                  ${o?"text-solace-green":""}
                  ${f?"text-solace-dark-green":""}
                  ${!o&&!f?"text-gray-500":""}
                `,children:d.title})]},d.id)})})]})}function A({children:r,onClick:s,disabled:c=!1,variant:d="primary",type:i="button",className:o=""}){const f="py-2 px-4 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",_={primary:"bg-solace-green hover:bg-solace-dark-green text-white focus:ring-solace-green disabled:bg-solace-green/50",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-500 disabled:bg-gray-100 disabled:text-gray-400",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-solace-green disabled:text-gray-400"};return e.jsx("button",{type:i,className:`${f} ${_[d]} ${o}`,onClick:s,disabled:c,children:r})}const ne=()=>e.jsx("svg",{className:"w-4 h-4 mr-1.5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),H={quick:{title:"Get Started Quickly",timeEstimate:"2 minutes",timeColor:"green",description:"Simple setup with recommended defaults",features:["Configure AI provider","Uses sensible defaults for everything else"]},advanced:{title:"Advanced Setup",timeEstimate:"10 minutes",timeColor:"blue",description:"Full control over all configuration options",features:["Configure project structure","Configure broker settings","Configure AI provider","Configure built-in agents","Configure file service"]}},ie=({pathType:r,isSelected:s,onSelect:c})=>{const d=H[r];return e.jsxs("div",{className:`
        border rounded-lg p-6 cursor-pointer transition-all
        ${s?"border-solace-blue bg-solace-light-blue/10 shadow-md":"border-gray-200 hover:border-solace-blue/50 hover:bg-gray-50"}
      `,onClick:c,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-solace-blue",children:d.title}),e.jsx("span",{className:`bg-${d.timeColor}-100 text-${d.timeColor}-800 text-xs font-medium px-2.5 py-0.5 rounded`,children:d.timeEstimate})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:d.description}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-600 mb-4",children:d.features.map((i,o)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(ne,{}),i]},o))})]})};function te({data:r,updateData:s,onNext:c,onPrevious:d}){const[i,o]=l.useState(r.setupPath||null),f=m=>{o(m),s({setupPath:m})},_=()=>{i&&c()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(H).map(m=>e.jsx(ie,{pathType:m,isSelected:i===m,onSelect:()=>f(m)},m))}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(A,{onClick:_,disabled:!i,children:"Continue"})})]})}function E({label:r,htmlFor:s,error:c,children:d,helpText:i,required:o=!1}){return e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:[r,o&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d,i&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i}),c&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c})]})}function M({id:r,type:s="text",name:c,value:d,onChange:i,placeholder:o="",required:f=!1,disabled:_=!1,className:m="",autoFocus:k=!1}){return e.jsx("input",{id:r,name:c||r,type:s,value:d,onChange:i,placeholder:o,required:f,disabled:_,autoFocus:k,className:`
        w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm 
        focus:outline-none focus:ring-blue-500 focus:border-blue-500 
        disabled:bg-gray-100 disabled:text-gray-500 
        ${m}
      `})}function O({children:r,className:s=""}){return e.jsx("div",{className:`p-4 bg-blue-50 rounded-md ${s}`,children:e.jsx("p",{className:"text-sm text-blue-800",children:r})})}function T({children:r,className:s=""}){return e.jsx("div",{className:`p-4 bg-yellow-50 rounded-md ${s}`,children:e.jsx("p",{className:"text-sm text-yellow-800",children:r})})}function oe({children:r,variant:s="info",className:c=""}){const d={info:"bg-blue-50 text-blue-800",success:"bg-green-50 text-green-800",error:"bg-red-50 text-red-800",loading:"bg-blue-50 text-blue-800"};return e.jsx("div",{className:`p-3 rounded-md ${d[s]} ${c}`,children:e.jsx("p",{className:"text-sm",children:r})})}function le({data:r,updateData:s,onNext:c,onPrevious:d}){var f;const i=_=>{s({[_.target.name]:_.target.value})},o=_=>{_.preventDefault(),c()};return e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(O,{className:"mb-4",children:"The namespace will be used as the topic prefix for all events in your Solace Agent Mesh."}),e.jsx(E,{label:"Project Namespace",htmlFor:"namespace",helpText:"This will be used as the topic prefix for all events.",required:!0,children:e.jsx(M,{id:"namespace",name:"namespace",value:r.namespace,onChange:i,placeholder:"Enter a namespace for your project",required:!0})})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:d,variant:"outline",children:"Previous"}),e.jsx(A,{type:"submit",disabled:!((f=r.namespace)!=null&&f.trim()),children:"Next"})]})]})}function z({id:r,options:s,value:c,onChange:d,name:i,required:o=!1,disabled:f=!1,className:_=""}){return e.jsxs("div",{className:"relative",children:[e.jsx("select",{id:r,name:i||r,value:c,onChange:d,required:o,disabled:f,className:`
          w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm 
          focus:outline-none focus:ring-blue-500 focus:border-blue-500 
          disabled:bg-gray-100 disabled:text-gray-500
          appearance-none
          pr-10
          ${_}
        `,children:s.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",children:e.jsx("svg",{className:"h-6 w-6 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}const ae=[{value:"solace",label:"Existing Solace Pub/Sub+ broker"},{value:"container",label:"New local Solace PubSub+ broker container (podman/docker)"},{value:"dev_mode",label:"Run in 'dev mode' - all in one process (not recommended for production)"}],ce=[{value:"podman",label:"Podman"},{value:"docker",label:"Docker"}];function de({data:r,updateData:s,onNext:c,onPrevious:d}){const[i,o]=l.useState({}),[f,_]=l.useState(!1),[m,k]=l.useState({isRunning:!1,success:r.container_started===!0,message:r.container_started?"Container already started successfully":""});l.useEffect(()=>{!r.container_engine&&r.broker_type==="container"&&s({container_engine:"podman"}),r.container_engine&&r.broker_type!=="container"&&s({container_engine:""}),r.broker_type!=="dev_mode"?s({dev_mode:!1}):r.broker_type==="dev_mode"&&s({dev_mode:!0})},[r.broker_type]);const N=p=>{s({[p.target.name]:p.target.value})},P=()=>{const p={};let h=!0;return w==="solace"&&(r.broker_url||(p.broker_url="Broker URL is required",h=!1),r.broker_vpn||(p.broker_vpn="VPN name is required",h=!1),r.broker_username||(p.broker_username="Username is required",h=!1),r.broker_password||(p.broker_password="Password is required",h=!1)),w==="container"&&!m.success&&(p.container="You must successfully run the container before proceeding",h=!1),o(p),h},L=async()=>{_(!0),k({isRunning:!0,success:!1,message:"Starting container..."});try{const h=await(await fetch("api/runcontainer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container_engine:r.container_engine})})).json();h.status==="success"?(k({isRunning:!1,success:!0,message:h.message||"Container started successfully!"}),s({container_engine:r.container_engine,container_started:!0})):(k({isRunning:!1,success:!1,message:h.message||"Failed to start container. Please try again."}),s({container_started:!1}))}catch(p){k({isRunning:!1,success:!1,message:p instanceof Error?p.message:"An unexpected error occurred"}),s({container_started:!1})}finally{_(!1)}},I=p=>{p.preventDefault(),P()&&c()},w=r.broker_type,a=w==="solace",b=w==="container";return e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{label:"Broker Type",htmlFor:"broker_type",required:!0,children:e.jsx(z,{id:"broker_type",name:"broker_type",options:ae,value:w,onChange:N,disabled:m.success&&r.broker_type==="container",required:!0})}),a&&e.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 rounded-md",children:[e.jsx(E,{label:"Broker URL",htmlFor:"broker_url",error:i.broker_url,required:!0,children:e.jsx(M,{id:"broker_url",name:"broker_url",value:r.broker_url||"",onChange:N,placeholder:"ws://localhost:8008",required:!0})}),e.jsx(E,{label:"VPN Name",htmlFor:"broker_vpn",error:i.broker_vpn,required:!0,children:e.jsx(M,{id:"broker_vpn",name:"broker_vpn",value:r.broker_vpn||"",onChange:N,placeholder:"default",required:!0})}),e.jsx(E,{label:"Username",htmlFor:"broker_username",error:i.broker_username,required:!0,children:e.jsx(M,{id:"broker_username",name:"broker_username",value:r.broker_username||"",onChange:N,placeholder:"default",required:!0,autoFocus:!0})}),e.jsx(E,{label:"Password",htmlFor:"broker_password",error:i.broker_password,required:!0,children:e.jsx(M,{id:"broker_password",name:"broker_password",type:"password",value:r.broker_password||"",onChange:N,placeholder:"Enter password",required:!0})})]}),b&&e.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 rounded-md",children:[e.jsx(E,{label:"Container Engine",htmlFor:"container_engine",required:!0,children:e.jsx(z,{id:"container_engine",name:"container_engine",options:ce,value:r.container_engine||"",onChange:N,disabled:m.isRunning||m.success})}),i.container&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:i.container}),m.message&&e.jsx(oe,{variant:m.isRunning?"loading":m.success?"success":"error",children:m.message}),e.jsx("div",{className:"mt-2",children:e.jsx(A,{onClick:L,disabled:f||m.success,variant:"primary",type:"button",children:f?"Starting Container...":m.success?"Container Running ✓":"Run Container"})})]}),w==="dev_mode"&&e.jsxs(T,{children:[e.jsx("strong",{children:"Warning:"})," Dev mode runs everything in a single process and is not recommended for production use."]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:d,variant:"outline",type:"button",children:"Previous"}),e.jsx(A,{type:"submit",disabled:f,children:"Next"})]})]})}function J({id:r,checked:s,onChange:c,disabled:d=!1}){const[i,o]=l.useState(s);l.useEffect(()=>{o(s)},[s]);const f=()=>{if(!d){const _=!i;o(_),c(_)}};return e.jsx("div",{className:"inline-block",children:e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:r,name:r,checked:i,onChange:f,disabled:d,className:"sr-only"}),e.jsx("div",{className:`
            relative w-11 h-6 rounded-full transition-colors duration-300 ease-in-out
            ${i?"bg-solace-green":"bg-gray-300"}
            ${d?"opacity-50":""}
          `,children:e.jsx("span",{className:`
              absolute top-1 left-1 bg-white w-4 h-4 rounded-full shadow transform transition-transform duration-300 ease-in-out
              ${i?"translate-x-5":"translate-x-0"}
            `})}),e.jsx("span",{className:"sr-only",children:i?"Enabled":"Disabled"})]})})}function Q({message:r,onConfirm:s,onCancel:c}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmation Required"}),e.jsx("p",{className:"mb-6 text-gray-700",children:r}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(A,{variant:"outline",onClick:c,children:"Cancel"}),e.jsx(A,{onClick:s,children:"Continue"})]})]})})}function Y({id:r,name:s,value:c,onChange:d,placeholder:i="",required:o=!1,disabled:f=!1,className:_="",autoFocus:m=!1,suggestions:k,onFocus:N,fetchSuggestions:P,showLoadingIndicator:L=!1}){const[I,w]=l.useState(!1),[a,b]=l.useState([]),[p,h]=l.useState(!1),g=l.useRef(null),S=l.useRef(null);l.useEffect(()=>{if(k&&k.length>0){const j=k.filter(C=>C!=null).filter(C=>C.toLowerCase().includes((c||"").toLowerCase()));b(j)}else b([])},[c,k]),l.useEffect(()=>{const j=C=>{g.current&&!g.current.contains(C.target)&&S.current&&!S.current.contains(C.target)&&w(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const F=async()=>{if(N&&N(),P)try{h(!0);const j=await P();j&&j.length>0&&b(j)}catch(j){console.error("Error fetching suggestions:",j)}finally{h(!1)}},y=()=>{w(!0)},v=j=>{var R;d({target:{name:s||r,value:j}}),w(!1),(R=g.current)==null||R.focus()};return e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{ref:g,id:r,name:s||r,type:"text",value:c||"",onChange:d,onFocus:F,onClick:y,placeholder:i,required:o,disabled:f,autoFocus:m,className:`
          w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
          focus:outline-none focus:ring-blue-500 focus:border-blue-500
          disabled:bg-gray-100 disabled:text-gray-500
          ${_}
        `,autoComplete:"off"}),p&&L&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-solace-green"})}),I&&a.length>0&&e.jsx("div",{ref:S,className:"absolute z-10 w-full mt-1 border bg-white border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:e.jsx("ul",{children:a.map((j,C)=>e.jsx("li",{onClick:()=>v(j),className:"px-3 py-2 cursor-pointer hover:bg-stone-300",children:j},C))})})]})}const W={openai:"https://api.openai.com/v1",anthropic:"https://api.anthropic.com",google:"https://generativelanguage.googleapis.com",aws:"https://bedrock-runtime.us-east-1.amazonaws.com",cohere:"https://api.cohere.ai/compatibility/v1",custom:""},me=[{value:"openai",label:"OpenAI"},{value:"anthropic",label:"Anthropic"},{value:"google",label:"Google Gemini"},{value:"azure",label:"Azure"},{value:"openai_compatible",label:"OpenAI Compatible Provider"}],ue=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"cohere",label:"Cohere"},{value:"openai_compatible",label:"OpenAI Compatible Provider"}],Z={openai:"openai",anthropic:"anthropic",google:"gemini",bedrock:"bedrock",openai_compatible:"openai",azure:"azure"},pe={openai:"openai",google:"gemini",cohere:"cohere",openai_compatible:"openai"},he={openai:["text-embedding-3-small","text-embedding-3-large","text-embedding-ada-002"],google:["gemini-embedding-exp-03-07"],cohere:["embed-english-v3.0","embed-multilingual-v3.0","embed-english-light-v3.0","embed-multilingual-light-v3.0"],openai_compatible:[]},ge={openai:["o3-mini","o3-mini-high","o3-mini-low","o1","o1-preview","o1-mini","gpt-4.5-preview","gpt-4o","gpt-4o-mini"],anthropic:["claude-3-7-sonnet-20250219","claude-3-5-sonnet-20241022","claude-3-5-haiku-20241022","claude-3-opus-20240229","claude-3-haiku-20240307"],google:["gemini-2.0-flash-001","gemini-2.0-pro-exp-02-05","gemini-2.0-flash-lite-001","gemini-2.0-flash-thinking-exp-01-21","gemini-1.5-flash-002","gemini-1.5-pro-002"],bedrock:["amazon.nova-pro-v1:0","amazon.nova-pro-latency-optimized-v1:0","amazon.nova-lite-v1:0","amazon.nova-micro-v1:0","anthropic.claude-3-7-sonnet-20250219-v1:0","anthropic.claude-3-5-sonnet-20241022-v2:0","anthropic.claude-3-5-haiku-20241022-v1:0","anthropic.claude-3-5-sonnet-20240620-v1:0","anthropic.claude-3-opus-20240229-v1:0","anthropic.claude-3-sonnet-20240229-v1:0","anthropic.claude-3-haiku-20240307-v1:0"],custom:[]};async function fe(r,s){try{const c=r.endsWith("/")?r:`${r}/`,d=await fetch(`${c}v1/models`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!d.ok)throw new Error(`Failed to fetch models: ${d.status}`);const i=await d.json();return i.data&&Array.isArray(i.data)?i.data.filter(o=>o.id).map(o=>o.id):i.models&&Array.isArray(i.models)?i.models.filter(o=>o.id||o.name).map(o=>o.id||o.name):Array.isArray(i)?i.filter(o=>o.id||o.name).map(o=>o.id||o.name):[]}catch(c){return console.error("Error fetching models:",c),[]}}function ee({data:r,updateData:s,onNext:c,onPrevious:d}){const[i,o]=l.useState({}),[f,_]=l.useState(!1),[m,k]=l.useState(null),[N,P]=l.useState(!1),[L,I]=l.useState([]),[w,a]=l.useState([]),[b,p]=l.useState(!1),[h,g]=l.useState(null),[S,F]=l.useState(null);l.useEffect(()=>{console.log(r.setupPath);const t={};r.llm_provider||(t.llm_provider="openai"),r.embedding_provider||(t.embedding_provider="openai"),r.embedding_service_enabled===void 0&&(t.embedding_service_enabled=!0),Object.keys(t).length>0&&s(t)},[r,s]),l.useEffect(()=>{if(r.llm_provider){const t={};if(h!==null&&h!==r.llm_provider){if(t.llm_model_name="",r.llm_provider!=="custom"&&r.llm_provider!=="openai_compatible"){const u=W[r.llm_provider]||"";t.llm_endpoint_url=u}else t.llm_endpoint_url="";Object.keys(t).length>0&&s(t)}g(r.llm_provider)}},[r.llm_provider,h,s]),l.useEffect(()=>{if(r.embedding_provider&&r.embedding_service_enabled){const t={};if(S!==null&&S!==r.embedding_provider){if(t.embedding_model_name="",r.embedding_provider!=="openai_compatible"){const u=W[r.embedding_provider]||"";t.embedding_endpoint_url=u}else t.embedding_endpoint_url="";Object.keys(t).length>0&&s(t)}F(r.embedding_provider)}},[r.embedding_provider,S,s,r.embedding_service_enabled]),l.useEffect(()=>{r.llm_provider&&r.llm_provider!=="custom"&&r.llm_provider!=="openai_compatible"?I(ge[r.llm_provider]||[]):I([])},[r.llm_provider]),l.useEffect(()=>{r.embedding_provider&&r.embedding_provider!=="openai_compatible"?a(he[r.embedding_provider]||[]):a([])},[r.embedding_provider]);const y=t=>{s({[t.target.name]:t.target.value})},v=t=>{s({embedding_service_enabled:t}),t||o({...i,embedding_provider:"",embedding_endpoint_url:"",embedding_api_key:"",embedding_model_name:""})},j=l.useCallback(async()=>{if((r.llm_provider==="custom"||r.llm_provider==="openai_compatible")&&r.llm_endpoint_url&&r.llm_api_key){p(!0);try{const t=await fe(r.llm_endpoint_url,r.llm_api_key);I(t)}catch(t){console.error("Error fetching models:",t)}finally{p(!1)}}return[]},[r.llm_provider,r.llm_endpoint_url,r.llm_api_key]),C=()=>{const t={};let u=!0;return r.llm_provider||(t.llm_provider="LLM provider is required",u=!1),(r.llm_provider==="custom"||r.llm_provider==="openai_compatible")&&!r.llm_endpoint_url&&(t.llm_endpoint_url=`LLM endpoint is required for ${r.llm_provider==="custom"?"custom provider":"OpenAI compatible endpoint"}`,u=!1),r.llm_model_name||(t.llm_model_name="LLM model name is required",u=!1),r.llm_api_key||(t.llm_api_key="LLM API key is required",u=!1),r.setupPath==="advanced"&&r.embedding_service_enabled&&(r.embedding_provider||(t.embedding_provider="Embedding provider is required",u=!1),r.embedding_endpoint_url||(t.embedding_endpoint_url="Embedding endpoint is required",u=!1),r.embedding_model_name||(t.embedding_model_name="Embedding model name is required",u=!1),r.embedding_api_key||(t.embedding_api_key="Embedding API key is required",u=!1)),r.llm_provider==="custom"&&r.llm_model_name&&!r.llm_model_name.includes("/")&&(t.llm_model_name="For custom providers, model name must follow the format provider/model-name (see litellm docs)",u=!1),o(t),u},R=(t,u)=>u==="custom"||t.includes("/")?t:`${Z[u]||u}/${t}`,n=async()=>{if(["bedrock"].includes(r.llm_provider)){c();return}_(!0),k(null);try{const u=r.llm_provider!=="custom"&&r.llm_provider!=="openai_compatible"&&W[r.llm_provider]||r.llm_endpoint_url,$=R(r.llm_model_name,r.llm_provider),q=await(await fetch("/api/test_llm_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:$,api_key:r.llm_api_key,base_url:u})})).json();q.status==="success"?(_(!1),c()):(k(q.message||"Failed to test LLM configuration"),P(!0),_(!1))}catch{k("An error occurred while testing the LLM configuration"),P(!0),_(!1)}},x=t=>{t.preventDefault(),C()&&n()};return e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{className:"mb-4",children:'Configure your AI service provider for language models. To use a LLM provider not in the dropdown choose "OpenAI Compatible Provider" and enter your base URL, API key and model name.'}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-700 font-semibold",children:"Language Model Configuration"}),e.jsx(E,{label:"LLM Provider",htmlFor:"llm_provider",error:i.llm_provider,required:!0,children:e.jsx(z,{id:"llm_provider",name:"llm_provider",value:r.llm_provider||"",onChange:y,options:me})}),(r.llm_provider==="custom"||r.llm_provider==="openai_compatible"||r.llm_provider==="azure")&&e.jsx(E,{label:"LLM Endpoint URL",htmlFor:"llm_endpoint_url",error:i.llm_endpoint_url,required:!0,children:e.jsx(M,{id:"llm_endpoint_url",name:"llm_endpoint_url",value:r.llm_endpoint_url,onChange:y,placeholder:"https://api.example.com/v1",autoFocus:!0})}),e.jsx(E,{label:"LLM API Key",htmlFor:"llm_api_key",error:i.llm_api_key,required:!0,children:e.jsx(M,{id:"llm_api_key",name:"llm_api_key",type:"password",value:r.llm_api_key,onChange:y,placeholder:"Enter your API key"})}),r.llm_provider==="custom"&&e.jsxs(T,{className:"mb-4",children:[e.jsx("strong",{children:"Important:"})," For custom providers, you must use the format ",e.jsx("code",{children:"provider/model-name"})," (e.g., ",e.jsx("code",{children:"mistral/mistral-tiny"}),") following the ",e.jsx("a",{href:"https://docs.litellm.ai/docs/providers",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"litellm documentation"}),"."]}),r.llm_provider==="azure"&&e.jsxs(T,{className:"mb-4",children:[e.jsx("strong",{children:"Important:"}),' For Azure, in the "LLM Model Name" field, enter your ',e.jsx("strong",{children:"deployment name"})," (not the underlying model name). Your Azure deployment name is the name you assigned when you deployed the model in Azure OpenAI Service. For more details, refer to the ",e.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/create-resource?pivots=web-portal#deploy-a-model",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Azure documentation"}),"."]}),e.jsx(E,{label:"LLM Model Name",htmlFor:"llm_model_name",error:i.llm_model_name,helpText:r.llm_provider==="custom"?"For custom providers, you must use format: provider/model-name (see litellm docs)":"Select or type a model name",required:!0,children:e.jsx(Y,{id:"llm_model_name",name:"llm_model_name",value:r.llm_model_name,onChange:y,placeholder:r.llm_provider==="custom"?"provider/model-name (e.g., azure/gpt-4)":"Select or type a model name",suggestions:L,onFocus:r.llm_provider==="custom"||r.llm_provider==="openai_compatible"?j:void 0,showLoadingIndicator:b})})]}),r.setupPath==="advanced"&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsxs("a",{href:"https://solacelabs.github.io/solace-agent-mesh/docs/documentation/user-guide/advanced/services/embedding-service",target:"_blank",rel:"noopener noreferrer",className:"font-medium underline inline-flex items-center",children:["The Embedding Service",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 ml-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})," ","provides a unified interface for agents to request text, image, or multi-modal embeddings through the Solace Agent Mesh."]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 font-semibold",children:"Embedding Model Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-3 text-sm text-gray-600",children:"Enable Embedding Service"}),e.jsx(J,{id:"embedding_service_enabled",checked:r.embedding_service_enabled,onChange:v})]})]}),r.embedding_service_enabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{label:"Embedding Provider",htmlFor:"embedding_provider",error:i.embedding_provider,required:!0,children:e.jsx(z,{id:"embedding_provider",name:"embedding_provider",value:r.embedding_provider||"",onChange:y,options:ue})}),r.embedding_provider==="openai_compatible"&&e.jsx(E,{label:"Embedding Endpoint URL",htmlFor:"embedding_endpoint_url",error:i.embedding_endpoint_url,required:!0,children:e.jsx(M,{id:"embedding_endpoint_url",name:"embedding_endpoint_url",value:r.embedding_endpoint_url||"",onChange:y,placeholder:"https://api.example.com/v1"})}),e.jsx(E,{label:"Embedding API Key",htmlFor:"embedding_api_key",error:i.embedding_api_key,required:!0,children:e.jsx(M,{id:"embedding_api_key",name:"embedding_api_key",type:"password",value:r.embedding_api_key||"",onChange:y,placeholder:"Enter your API key"})}),e.jsx(E,{label:"Embedding Model Name",htmlFor:"embedding_model_name",error:i.embedding_model_name,required:!0,children:e.jsx(Y,{id:"embedding_model_name",name:"embedding_model_name",value:r.embedding_model_name,onChange:y,placeholder:"Select or type a model name",suggestions:w,showLoadingIndicator:b})})]})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:d,variant:"outline",children:"Previous"}),e.jsx(A,{type:"submit",children:"Next"})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Testing LLM Configuration"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-solace-green"})}),e.jsx("p",{children:"Please wait while we test your LLM configuration..."})]})}),N&&e.jsx(Q,{message:`LLM Configuration Test Failed: ${m}
This may indicate an issue with your LLM provider settings. Please check your endpoint URL, API key, and model name.
Would you like to ignore this warning and continue anyway?`,onConfirm:()=>{P(!1),c()},onCancel:()=>{P(!1)}})]})}const V=[{id:"web_request",name:"Web Request Agent",description:"Can make queries to web to get real-time data",envVars:[]},{id:"image_processing",name:"Image Processing Agent",description:"Generate images from text or convert images to text",envVars:[{key:"IMAGE_GEN_ENDPOINT",label:"Image Generation Endpoint",placeholder:"Enter endpoint URL",type:"text",defaultValue:"",required:!0},{key:"IMAGE_GEN_API_KEY",label:"Image Generation API Key",placeholder:"Enter API key",type:"password",defaultValue:"",required:!0},{key:"IMAGE_GEN_MODEL",label:"Image Generation Model",placeholder:"provider/model-name",type:"text",defaultValue:"",required:!0,validation:r=>r?r.includes("/")?null:"Model name should follow the format provider/model-name":"Image Generation Model is required"}]}];function be({data:r,updateData:s,onNext:c,onPrevious:d}){const[i,o]=l.useState({}),[f,_]=l.useState({}),[m,k]=l.useState(!1);l.useEffect(()=>{if(m)return;const a={};r.env_var&&Array.isArray(r.env_var)&&r.env_var.forEach(p=>{if(p.includes("=")){const[h,g]=p.split("=");a[h]=g}});const b=r.built_in_agent||[];V.forEach(p=>{p.envVars&&b.includes(p.id)&&p.envVars.forEach(h=>{a[h.key]||(a[h.key]=h.defaultValue)})}),_(a),k(!0)},[r,m]);const N=a=>(r.built_in_agent||[]).includes(a),P=(a,b)=>{const p={...f,[a]:b};_(p);const h=Object.entries(p).filter(([g,S])=>S!=="").map(([g,S])=>`${g}=${S}`);s({env_var:h}),i[a]&&o({...i,[a]:""})},L=(a,b)=>{if(!b){const g=V.find(S=>S.id===a);if(g!=null&&g.envVars&&g.envVars.length>0){const S={...f},F={...i};g.envVars.forEach(v=>{delete S[v.key],delete F[v.key]}),_(S),o(F);const y=Object.entries(S).filter(([v,j])=>j!=="").map(([v,j])=>`${v}=${j}`);s({env_var:y})}}const p=r.built_in_agent||[];let h;b?h=p.includes(a)?p:[...p,a]:h=p.filter(g=>g!==a),s({built_in_agent:h})},I=()=>{const a={};let b=!0;return V.forEach(p=>{N(p.id)&&p.envVars&&p.envVars.forEach(h=>{if(!(!h.required&&!f[h.key]))if(h.validation){const g=h.validation(f[h.key]||"");g&&(a[h.key]=g,b=!1)}else h.required&&!f[h.key]&&(a[h.key]=`${h.label} is required`,b=!1)})}),o(a),b},w=a=>{a.preventDefault(),I()&&c()};return e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{className:"mb-4",children:"Enable and configure built-in agents to extend your system's capabilities."}),e.jsx("div",{className:"space-y-4",children:V.map(a=>e.jsxs("div",{className:"flex flex-col p-4 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-solace-blue",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500",children:a.description})]}),e.jsx(J,{id:`toggle_${a.id}`,checked:N(a.id),onChange:b=>L(a.id,b)})]}),N(a.id)&&a.envVars&&a.envVars.length>0&&e.jsx("div",{className:"space-y-4 mt-4 pt-4 border-t border-gray-200",children:a.envVars.map(b=>{var p;return e.jsx(E,{label:b.label,htmlFor:b.key,error:i[b.key],required:!!b.required,children:e.jsx(M,{id:b.key,name:b.key,type:b.type,value:f[b.key]||"",onChange:h=>P(b.key,h.target.value),placeholder:b.placeholder,required:!!b.required&&N(a.id),autoFocus:((p=a==null?void 0:a.envVars)==null?void 0:p.indexOf(b))===0})},b.key)})})]},a.id))})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:d,variant:"outline",type:"button",children:"Previous"}),e.jsx(A,{type:"submit",children:"Next"})]})]})}const xe=[{value:"volume",label:"Volume: Use a local volume (directory) to store files"},{value:"bucket",label:"Bucket: Use a cloud bucket to store files (Must use AWS S3 API)"}];function ve({data:r,updateData:s,onNext:c,onPrevious:d}){const[i,o]=l.useState({}),[f,_]=l.useState(""),[m,k]=l.useState(""),[N,P]=l.useState(""),[L,I]=l.useState(!1),[w,a]=l.useState(r.file_service_provider||"volume");l.useEffect(()=>{if(L)return;const y=r.file_service_provider||"volume";if(a(y),y==="volume"){let v="/tmp/solace-agent-mesh";if(r.file_service_config&&Array.isArray(r.file_service_config)){const j=r.file_service_config.find(C=>C.startsWith("directory="));j&&(v=j.split("=")[1])}_(v),r.file_service_config||s({file_service_provider:y,file_service_config:[`directory=${v}`]})}else if(y==="bucket"&&r.file_service_config&&Array.isArray(r.file_service_config)){const v=r.file_service_config.find(C=>C.startsWith("bucket_name=")),j=r.file_service_config.find(C=>C.startsWith("endpoint_url="));v&&k(v.split("=")[1]),j&&P(j.split("=")[1])}I(!0)},[r,L,s]);const b=y=>{const v=y.target.value;a(v),v==="volume"?s({file_service_provider:v,file_service_config:[`directory=${f||"/tmp/solace-agent-mesh"}`]}):v==="bucket"&&s({file_service_provider:v,file_service_config:[`bucket_name=${m}`,`endpoint_url=${N}`]})},p=y=>{const v=y.target.value;_(v),s({file_service_config:[`directory=${v}`]})},h=y=>{const v=y.target.value;k(v),s({file_service_config:[`bucket_name=${v}`,...N?[`endpoint_url=${N}`]:[]]})},g=y=>{const v=y.target.value;P(v),s({file_service_config:[...m?[`bucket_name=${m}`]:[],`endpoint_url=${v}`]})},S=()=>{const y={};let v=!0;return w==="volume"?f||(y.volumePath="Volume path is required",v=!1):w==="bucket"&&(m||(y.bucketName="Bucket name is required",v=!1),N||(y.endpointUrl="Endpoint URL is required",v=!1)),o(y),v},F=y=>{y.preventDefault(),S()&&c()};return e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{className:"mb-4",children:"Choose how you want to store files in your Solace Agent Mesh system."}),e.jsx(E,{label:"File Service Provider",htmlFor:"file_service_provider",required:!0,children:e.jsx(z,{id:"file_service_provider",name:"file_service_provider",options:xe,value:w,onChange:b})}),w==="volume"&&e.jsx(E,{label:"Volume Path",htmlFor:"volumePath",helpText:"The directory path where files will be stored",error:i.volumePath,required:!0,children:e.jsx(M,{id:"volumePath",name:"volumePath",value:f,onChange:p,placeholder:"/tmp/solace-agent-mesh",autoFocus:!0})}),w==="bucket"&&e.jsxs(e.Fragment,{children:[e.jsx(E,{label:"Bucket Name",htmlFor:"bucketName",helpText:"The name of the S3 bucket to use for file storage",error:i.bucketName,required:!0,children:e.jsx(M,{id:"bucketName",name:"bucketName",value:m,onChange:h,placeholder:"my-s3-bucket"})}),e.jsx(E,{label:"Endpoint URL",htmlFor:"endpointUrl",helpText:"The S3 service endpoint URL",error:i.endpointUrl,required:!0,children:e.jsx(M,{id:"endpointUrl",name:"endpointUrl",value:N,onChange:g,placeholder:"https://s3.amazonaws.com"})}),e.jsxs(T,{children:[e.jsx("strong",{children:"Note:"})," You can setup the Boto3 authentication configuration in the ./solace-agent-mesh.yaml file"]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:d,variant:"outline",children:"Previous"}),e.jsx(A,{type:"submit",children:"Next"})]})]})}function _e(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 bg-green-50 rounded-md mb-4 text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-bold text-green-800 mb-2",children:"Solace Agent Mesh Initialized Successfully!"}),e.jsx("p",{className:"text-green-700",children:"Your configuration has been saved and your project has been set up."})]}),e.jsxs("div",{className:"p-4 bg-solace-blue text-white rounded-md",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Next Steps"}),e.jsxs("p",{className:"mb-4",children:["Your configurations have been saved in the ",e.jsx("code",{className:"bg-gray-800 px-1 py-0.5 rounded",children:".env"})," file in the root of the project and the ",e.jsx("code",{className:"bg-gray-800 px-1 py-0.5 rounded",children:"solace-agent-mesh.yaml"})," file."]}),e.jsx("p",{className:"mb-4",children:"To start Solace Agent Mesh directly, you can run:"}),e.jsx("div",{className:"bg-gray-800 text-gray-200 p-3 rounded font-mono text-sm mb-4",children:"$ solace-agent-mesh run -eb"}),e.jsxs("p",{className:"mb-4",children:["To get started adding components, use the"," ",e.jsx("code",{className:"bg-gray-800 px-1 py-0.5 rounded",children:"solace-agent-mesh add"})," ","command to add agents and gateways."]}),e.jsx("div",{className:"bg-gray-800 text-gray-200 p-3 rounded font-mono text-sm mb-4",children:"$ solace-agent-mesh add agent my-agent"}),e.jsxs("p",{className:"mb-4 bg-gray-700 p-3 rounded text-yellow-300",children:[e.jsx("span",{className:"font-bold",children:"Pro Tip:"})," You can use ",e.jsx("code",{className:"bg-gray-800 px-1 py-0.5 rounded",children:"sam"})," as a shorthand for ",e.jsx("code",{className:"bg-gray-800 px-1 py-0.5 rounded",children:"solace-agent-mesh"})," in all commands:"]}),e.jsx("div",{className:"bg-gray-800 text-gray-200 p-3 rounded font-mono text-sm",children:"$ sam add agent my-agent"})]}),e.jsxs("div",{className:"p-4 bg-solace-blue text-white rounded-md mt-6",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Documentation Resources"}),e.jsx("p",{className:"mb-4",children:"For more information on how to use Solace Agent Mesh, check out our documentation:"}),e.jsx("a",{href:"https://solacelabs.github.io/solace-agent-mesh/docs/documentation/getting-started/introduction/",className:"inline-block bg-white bg-opacity-20 px-4 py-2 rounded-md hover:bg-opacity-30 transition-all font-medium",children:"View Documentation →"})]})]})}const ye=["llm","ai","api","url","vpn"],je=["broker_password","llm_api_key","embedding_api_key"],Ne={Project:["namespace"],Broker:["broker_type"],"AI Providers":["llm_model_name","llm_endpoint_url","llm_api_key","embedding_model_name","embedding_endpoint_url","embedding_api_key"],"Built-in Agents":["built_in_agent"],"File Service":["file_service_provider","file_service_config"]};function re({data:r,onPrevious:s}){const[c,d]=l.useState(!1),[i,o]=l.useState(!1),[f,_]=l.useState(null),[m,k]=l.useState(!1),[N,P]=l.useState(""),L=l.useMemo(()=>{const n={};return V.forEach(x=>{var t;n[x.id]={name:x.name,envVars:(t=x.envVars)==null?void 0:t.map(u=>u.key)}}),n},[]),I=n=>n===void 0||n===""||Array.isArray(n)&&n.length===0,w=n=>n.split("_").map(x=>ye.includes(x.toLowerCase())?x.toUpperCase():x.charAt(0).toUpperCase()+x.slice(1)).join(" "),a=(n,x)=>je.includes(n)||n.toUpperCase().includes("API_KEY")?x&&x.length>0?"••••••••":"Not provided":typeof x=="boolean"?x?"Yes":"No":Array.isArray(x)?x.join(", "):x&&x.toString().length>0?x.toString():"Not provided",b=n=>{switch(n){case"solace":return"Existing Solace Pub/Sub+ broker";case"container":return"New local Solace PubSub+ broker container (podman/docker)";case"dev_mode":return"Run in 'dev mode' - all in one process (not recommended for production)";default:return n}},p=()=>{const n=r.broker_type;return n?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:b(n)})]}),n==="container"&&e.jsx("div",{className:"pl-4 border-l-2 border-gray-300 mb-2",children:e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Container Engine:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:r.container_engine||"Docker"})]})}),(n==="solace"||n==="container")&&e.jsxs("div",{className:"pl-4 border-l-2 border-gray-300",children:[e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Broker URL:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:r.broker_url})]}),e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Broker VPN:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:r.broker_vpn})]}),e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Username:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:r.broker_username})]}),e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Password:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:a("broker_password",r.broker_password)})]})]})]}):null},h=n=>e.jsx("div",{className:"space-y-2 pl-1",children:n.map(x=>{const t=L[x]||{name:x};return e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-600 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("span",{className:"font-medium text-gray-900",children:t.name})})]},x)})}),g=n=>{var u,$,B;const x=n.some(q=>q.startsWith("directory=")),t=n.some(q=>q.startsWith("bucket_name="));if(x){const q=(u=n.find(U=>U.startsWith("directory=")))==null?void 0:u.split("=")[1];return e.jsx("div",{className:"pl-4 border-l-2 border-gray-300",children:e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Volume Path:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:q})]})})}if(t){const q=($=n.find(G=>G.startsWith("bucket_name=")))==null?void 0:$.split("=")[1],U=(B=n.find(G=>G.startsWith("endpoint_url=")))==null?void 0:B.split("=")[1];return e.jsxs("div",{className:"pl-4 border-l-2 border-gray-300",children:[e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Bucket Name:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:q})]}),e.jsxs("div",{className:"flex mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Endpoint URL:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:U})]})]})}return e.jsx("div",{className:"font-medium text-gray-900",children:n.join(", ")})},S=(n,x)=>x.some(u=>!I(r[u]))?e.jsxs("div",{className:"pb-4 mb-4 border-b border-gray-300 last:border-0 last:mb-0 last:pb-0",children:[e.jsx("h4",{className:"font-semibold text-solace-blue mb-3",children:n}),e.jsx("div",{className:"space-y-3",children:x.map(u=>I(r[u])?null:u==="broker_type"?e.jsx("div",{children:p()},u):u==="built_in_agent"&&Array.isArray(r[u])?e.jsx("div",{children:h(r[u])},u):u==="file_service_config"&&Array.isArray(r[u])?e.jsx("div",{children:g(r[u])},u):e.jsxs("div",{className:"flex mb-1",children:[e.jsxs("span",{className:"text-gray-600",children:[w(u),":"]}),e.jsx("span",{className:"font-medium text-gray-900 ml-2",children:a(u,r[u])})]},u))})]},n):null,F=n=>{n.namespace&&!n.namespace.endsWith("/")&&(n.namespace+="/"),n.container_started&&delete n.container_started,n.llm_provider&&(n.llm_provider=Z[n.llm_provider]),n.embedding_provider&&(n.embedding_provider=pe[n.embedding_provider]),n.llm_model_name&&n.llm_provider&&(n.llm_model_name=`${n.llm_provider}/${n.llm_model_name}`,delete n.llm_provider),n.embedding_service_enabled||(n.embedding_api_key="",n.embedding_model_name="",n.embedding_endpoint_url=""),n.embedding_model_name&&n.embedding_provider&&(n.embedding_model_name=`${n.embedding_provider}/${n.embedding_model_name}`,delete n.embedding_provider)},y=async(n=!1)=>{F(r),console.log("Submitting configuration:",r);try{const x=await fetch("api/save_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n?{...r,force:!0}:r)}),t=await x.json();if(x.status===400&&t.status==="ask_confirmation"){P(t.message),k(!0);return}if(!x.ok)throw new Error(`HTTP error ${x.status}: ${t.message||"Unknown error"}`);if(t.status==="success"){console.log("Configuration sent successfully!"),o(!0);try{const u=await fetch("api/shutdown",{method:"POST"});u.ok?console.log("Shutdown request sent successfully"):console.warn("Shutdown request failed:",u.status)}catch(u){console.error("Error sending shutdown request:",u)}}else throw new Error(t.message||"Failed to save configuration")}catch(x){_(x instanceof Error?x.message:"An unknown error occurred"),console.error("Error saving configuration:",x)}finally{d(!1)}},v=async()=>{d(!0),_(null),await y()},j=()=>{k(!1),d(!0),y(!0)},C=()=>{k(!1),d(!1)},R=n=>{n.preventDefault(),v()};return e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx(Q,{message:N,onConfirm:j,onCancel:C}),i?e.jsx(_e,{}):e.jsxs("form",{onSubmit:R,children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 rounded-md p-5 space-y-4",children:Object.entries(Ne).map(([n,x])=>S(n,x))}),f&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md border border-red-200",children:[e.jsx("p",{className:"font-medium",children:"Error initializing project"}),e.jsx("p",{children:f})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx(A,{onClick:s,variant:"outline",type:"button",children:"Previous"}),e.jsx(A,{type:"submit",disabled:c,children:c?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Initializing..."})]}):"Initialize Project"})]})]})]})}const D={id:"path-selection",title:"Setup Path",description:"Choose your setup path",component:te},K=[{id:"project-setup",title:"Project Structure",description:"Set up your project namespace",component:le},{id:"broker-setup",title:"Broker Setup",description:"Configure your Solace PubSub+ broker connection",component:de},{id:"ai-provider-setup",title:"AI Provider",description:"Configure your AI services",component:ee},{id:"builtin-agent-setup",title:"Builtin Agents",description:"Enable and configure built-in agents",component:be},{id:"file-service-setup",title:"File Service",description:"Configure storage for your files",component:ve},{id:"completion",title:"Review & Submit",description:"Finalize your configuration",component:re}],X=[{id:"ai-provider-setup",title:"AI Provider",description:"Configure your AI services",component:ee},{id:"completion",title:"Review & Submit",description:"Finalize your configuration",component:re}];function ke(){const[r,s]=l.useState(0),[c,d]=l.useState({}),[i,o]=l.useState(!1),[f,_]=l.useState(null),[m,k]=l.useState(null),[N,P]=l.useState([D]);l.useEffect(()=>{m&&(o(!0),fetch(`/api/default_options?path=${m}`).then(g=>{if(!g.ok)throw new Error("Failed to fetch default options");return g.json()}).then(g=>{if(g&&g.default_options){const S=g.default_options;L(S),d({...c,...S}),o(!1)}else throw new Error("Invalid response format")}).catch(g=>{console.error("Error fetching default options:",g),_("Failed to load configuration options. Please refresh or try again later."),o(!1)}))},[m]);const L=g=>{g.llm_model_name&&delete g.llm_model_name,g.embedding_model_name&&delete g.embedding_model_name};l.useEffect(()=>{m==="quick"?P([D,...X]):m==="advanced"&&P([D,...K])},[m]);const I=N[r],w=g=>{g.setupPath&&g.setupPath!==m&&k(g.setupPath),d({...c,...g})},a=()=>{r<N.length-1&&s(r+1)},b=()=>{r>0&&s(r-1)};if(i&&r>0)return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-solace-blue",children:"Solace Agent Mesh Initialization"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-full text-center",children:[e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"h-4 w-1/2 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-10 w-3/4 bg-gray-200 rounded"})]}),e.jsx("p",{className:"mt-4",children:"Loading configuration options..."})]})]});if(f)return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-solace-blue",children:"Solace Agent Mesh Initialization"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"Error"}),e.jsx("p",{children:f})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-solace-blue hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Retry"})})]})]});const p=I.component,h=r>0;return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-solace-blue",children:"Solace Agent Mesh Initialization"}),h&&e.jsx("div",{className:"mb-8",children:e.jsx(se,{steps:m==="quick"?X:m==="advanced"?K:[],currentStepIndex:r>0?r-1:0,onStepClick:g=>{}})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-solace-blue",children:I.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:I.description}),e.jsx(p,{data:c,updateData:w,onNext:a,onPrevious:b})]})]})}const Se=()=>[{title:"Solace Agent Mesh Initializer"},{name:"description",content:"Initialize your Solace Agent Mesh project"}];function Ce(){return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx(ke,{})})}export{Ce as default,Se as meta};
